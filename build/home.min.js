var html=document.getElementsByTagName("html")[0],main=document.getElementsByTagName("main")[0],timetable=document.getElementsByClassName("timetable")[0],timetable_previous=document.getElementById("timetable_previous"),timetable_next=document.getElementById("timetable_next"),weeks=document.querySelectorAll(".timetable > div"),today_week=Array.prototype.slice.call(weeks).indexOf(timetable.getElementsByClassName("cur_week")[0]),cur_week=Array.prototype.slice.call(weeks).indexOf(timetable.getElementsByClassName("shown")[0]),days=document.querySelectorAll(".timetable > div > div"),goto_today_buttons=timetable.getElementsByTagName("button");function onResize(){timetable.style.height=weeks[cur_week].offsetHeight+"px"}function goto_day(e){html.classList.add("loaded"),cur_week=Array.prototype.slice.call(weeks).indexOf(timetable.getElementsByClassName(e)[0].parentNode.parentNode);for(let e of weeks)e.classList.remove("shown");weeks[cur_week].classList.add("shown"),timetable_previous.classList.toggle("hidden",cur_week<=0),timetable_next.classList.toggle("hidden",cur_week>=weeks.length-1),timetable.style.height=weeks[cur_week].offsetHeight+"px"}function goto_week(e){html.classList.add("loaded"),cur_week=e;for(let e of weeks)e.classList.remove("shown");weeks[cur_week].classList.add("shown"),timetable_previous.classList.toggle("hidden",cur_week<=0),timetable_next.classList.toggle("hidden",cur_week>=weeks.length-1),timetable.style.height=weeks[cur_week].offsetHeight+"px"}Event.add(window,"load",()=>{Event.add(window,"resize",onResize),onResize(),Event.add(timetable_previous,"click",()=>{if(html.classList.add("loaded"),!timetable_previous.classList.contains("hidden")){for(let e of weeks)e.classList.remove("shown");weeks[--cur_week].classList.add("shown"),timetable_previous.classList.toggle("hidden",cur_week<=0),timetable_next.classList.toggle("hidden",cur_week>=weeks.length-1),timetable.style.height=weeks[cur_week].offsetHeight+"px"}}),Event.add(timetable_next,"click",()=>{if(html.classList.add("loaded"),!timetable_next.classList.contains("hidden")){for(let e of weeks)e.classList.remove("shown");weeks[++cur_week].classList.add("shown"),timetable_previous.classList.toggle("hidden",cur_week<=0),timetable_next.classList.toggle("hidden",cur_week>=weeks.length-1),timetable.style.height=weeks[cur_week].offsetHeight+"px"}});for(let e of goto_today_buttons)Event.add(e,"click",()=>{goto_week(today_week)});for(let e of days)for(let t of e.getElementsByTagName("li")){let e=t.getElementsByClassName("details")[0];void 0!==e&&Event.add(t,"mousemove",s=>{e.style.top=Math.min((window.pageYOffset||document.scrollTop||0)-(document.clientTop||0)+document.documentElement.clientHeight-e.offsetHeight-20,s.pageY)-(html.scrollTop+t.getBoundingClientRect().top)+20+"px",e.style.left=Math.min((window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)+document.documentElement.clientWidth-e.offsetWidth-20,s.pageX)-t.getBoundingClientRect().left+20+"px"})}});